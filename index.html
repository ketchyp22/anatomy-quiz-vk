<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –ö–≤–∏–∑</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="gamification.css">
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    
    <!-- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π -->
    <meta property="og:title" content="–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –ö–≤–∏–∑ ‚Äì –ø—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è!">
    <meta property="og:description" content="–¢–µ—Å—Ç –ø–æ –º–µ–¥–∏—Ü–∏–Ω–µ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–µ–∂–∏–º–∞–º–∏: –∞–Ω–∞—Ç–æ–º–∏—è, –∫–ª–∏–Ω–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, —Ñ–∞—Ä–º–∞–∫–æ–ª–æ–≥–∏—è, –ø–µ—Ä–≤–∞—è –ø–æ–º–æ—â—å –∏ –∞–∫—É—à–µ—Ä—Å—Ç–≤–æ.">
    <meta property="og:image" content="https://vk.com/images/camera_100.png">
    <meta name="theme-color" content="#5a67d8">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äç‚öïÔ∏è</text></svg>">
    
    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ä–µ–∂–∏–º–æ–≤ */
        .quiz-mode-btn[data-mode="first_aid"] {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
            color: white;
        }
        
        .quiz-mode-btn[data-mode="obstetrics"] {
            background: linear-gradient(135deg, #ec4899 0%, #d946ef 100%);
            color: white;
        }
        
        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ */
        .user-info {
            display: none;
            align-items: center;
            margin-bottom: 25px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            animation: slideIn 0.5s ease-out;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
            transition: all 0.3s ease;
        }
        
        .user-info.loaded {
            display: flex;
        }
        
        .user-info img {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            margin-right: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border: 3px solid white;
            transition: transform 0.3s ease;
        }
        
        .user-info img:hover {
            transform: scale(1.1);
        }
        
        .user-info span {
            font-weight: 600;
            font-size: 17px;
            letter-spacing: 0.3px;
            color: var(--text-color);
        }
        
        /* –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ */
        .mode-description {
            margin-top: 15px;
            padding: 12px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            font-size: 14px;
            color: #666;
            text-align: center;
            min-height: 20px;
            opacity: 0;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        
        .mode-description.active-description {
            opacity: 1;
            background: rgba(90, 103, 216, 0.1);
            border-left-color: var(--accent-color);
        }
        
        /* –°—Å—ã–ª–∫–∞ –Ω–∞ –∞–≤—Ç–æ—Ä–∞ */
        .author-credit {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: #4a5568;
        }
        
        .author-credit a {
            color: #5a67d8;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .author-credit a:hover {
            color: #434190;
            text-decoration: underline;
        }

        /* –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —à–µ—Ä–∏–Ω–≥–∞ */
        #share-results {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            position: relative;
            overflow: hidden;
        }
        
        #share-results::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        #share-results:hover::before {
            left: 100%;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .user-info {
                padding: 10px 12px;
                margin-bottom: 20px;
            }
            
            .user-info img {
                width: 40px;
                height: 40px;
                margin-right: 12px;
            }
            
            .user-info span {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
    <div class="animated-bg"></div>
    
    <!-- –ü–ª–∞–≤–∞—é—â–∏–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∏–∫–æ–Ω–∫–∏ -->
    <div class="medical-icons">
        <div class="medical-icon icon1"></div>
        <div class="medical-icon icon2"></div>
        <div class="medical-icon icon3"></div>
        <div class="medical-icon icon4"></div>
        <div class="medical-icon icon5"></div>
        <div class="medical-icon icon6"></div>
    </div>
    
    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ -->
    <div id="start-screen">
        <div id="user-info" class="user-info">
            <!-- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
        </div>
        
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–æ–±–∞–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
        
        <h1><span class="doctor-emoji">üë®‚Äç‚öïÔ∏è</span> –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –ö–≤–∏–∑</h1>
        
        <div class="difficulty-selection">
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:</h2>
            <button class="difficulty-btn active" data-difficulty="easy">–û–±—ã—á–Ω—ã–π</button>
            <button class="difficulty-btn" data-difficulty="hard">–°–ª–æ–∂–Ω—ã–π</button>
        </div>
        
        <div class="quiz-mode-selection">
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º:</h2>
            <button class="quiz-mode-btn active" data-mode="anatomy">–ê–Ω–∞—Ç–æ–º–∏—è</button>
            <button class="quiz-mode-btn" data-mode="clinical">–ö–ª–∏–Ω–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ</button>
            <button class="quiz-mode-btn" data-mode="pharmacology">–§–∞—Ä–º–∞–∫–æ–ª–æ–≥–∏—è</button>
            <button class="quiz-mode-btn" data-mode="first_aid">–ü–µ—Ä–≤–∞—è –ø–æ–º–æ—â—å</button>
            <button class="quiz-mode-btn" data-mode="obstetrics">–ê–∫—É—à–µ—Ä—Å—Ç–≤–æ</button>
            
            <div id="mode-description" class="mode-description"></div>
        </div>
        
        <button id="start-quiz" class="btn-primary">–ù–∞—á–∞—Ç—å –∫–≤–∏–∑</button>
        
        <div class="author-credit">
            <p>¬© 2025 ¬∑ <a href="https://vk.com/id837477864" target="_blank">–ê–≤—Ç–æ—Ä</a></p>
        </div>
        
        <div class="card-pulse">
            <svg class="pulse-line-svg" viewBox="0 0 150 40" preserveAspectRatio="none">
                <path class="pulse-line-path" d="M0,20 L10,20 L15,20 L20,10 L25,30 L30,20 L35,20 L40,20 L45,20 L50,20 L55,10 L60,30 L65,20 L70,20 L75,20 L80,20 L85,20 L90,10 L95,30 L100,20 L105,20 L110,20 L115,20 L120,20 L125,10 L130,30 L135,20 L140,20 L150,20"></path>
            </svg>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–≤–∏–∑–∞ -->
    <div id="quiz-container" style="display: none;">
        <div id="user-info-quiz" class="user-info">
            <!-- –ö–æ–ø–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
        </div>
        <div id="question-counter" class="question-counter"></div>
        <div id="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
        <div id="timer" class="timer"></div>
        <div id="question" class="question"></div>
        <div id="options" class="options"></div>
        <div class="quiz-buttons">
            <button id="next-question" class="btn-primary" disabled>–î–∞–ª–µ–µ</button>
            <button id="exit-quiz" class="btn-secondary">–í—ã–π—Ç–∏</button>
        </div>
        
        <div class="card-pulse">
            <svg class="pulse-line-svg" viewBox="0 0 150 40" preserveAspectRatio="none">
                <path class="pulse-line-path" d="M0,20 L10,20 L15,20 L20,10 L25,30 L30,20 L35,20 L40,20 L45,20 L50,20 L55,10 L60,30 L65,20 L70,20 L75,20 L80,20 L85,20 L90,10 L95,30 L100,20 L105,20 L110,20 L115,20 L120,20 L125,10 L130,30 L135,20 L140,20 L150,20"></path>
            </svg>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
    <div id="results-container" style="display: none;">
        <h1><span class="doctor-emoji">üë®‚Äç‚öïÔ∏è</span> –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞</h1>
        <div id="score" class="score">
            <div id="mode-badge" class="difficulty-badge">–ê–Ω–∞—Ç–æ–º–∏—è</div>
            <div id="difficulty-badge" class="difficulty-badge">–û–±—ã—á–Ω—ã–π</div>
            <div class="score-percentage"><span id="percentage">0</span>%</div>
            <div class="score-text">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <span id="correct-answers">0</span> –∏–∑ <span id="total-questions-result">10</span></div>
        </div>
        
        <!-- –ú–µ—Å—Ç–æ –¥–ª—è –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
        
        <div class="results-buttons">
            <button id="share-results" class="btn-primary">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</button>
            <button id="restart-quiz" class="btn-secondary">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
        </div>
        
        <div class="card-pulse">
            <svg class="pulse-line-svg" viewBox="0 0 150 40" preserveAspectRatio="none">
                <path class="pulse-line-path" d="M0,20 L10,20 L15,20 L20,10 L25,30 L30,20 L35,20 L40,20 L45,20 L50,20 L55,10 L60,30 L65,20 L70,20 L75,20 L80,20 L85,20 L90,10 L95,30 L100,20 L105,20 L110,20 L115,20 L120,20 L125,10 L130,30 L135,20 L140,20 L150,20"></path>
            </svg>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ -->
    <div id="tooltip-container" class="tooltip-container" style="display: none;">
        <div class="tooltip-content"></div>
    </div>

    <!-- ==================== –°–ö–†–ò–ü–¢–´ ==================== -->
    
    <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script>
        // –û–ø–∏—Å–∞–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ –∫–≤–∏–∑–∞
        window.modeDescriptions = {
            'anatomy': '–í–æ–ø—Ä–æ—Å—ã –æ —Å—Ç—Ä–æ–µ–Ω–∏–∏ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ —Ç–µ–ª–∞, –æ—Ä–≥–∞–Ω–∞—Ö –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö',
            'clinical': '–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –∑–Ω–∞–Ω–∏–π –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –ª–µ—á–µ–Ω–∏—è –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π',
            'pharmacology': '–í–æ–ø—Ä–æ—Å—ã –æ –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞—Ö, –∏—Ö –¥–µ–π—Å—Ç–≤–∏–∏ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏',
            'first_aid': '–ù–µ–æ—Ç–ª–æ–∂–Ω–∞—è –ø–æ–º–æ—â—å –ø—Ä–∏ —Ç—Ä–∞–≤–º–∞—Ö, –æ—Ç—Ä–∞–≤–ª–µ–Ω–∏—è—Ö –∏ –¥—Ä—É–≥–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö',
            'obstetrics': '–í–æ–ø—Ä–æ—Å—ã –æ –≤–µ–¥–µ–Ω–∏–∏ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏, —Ä–æ–¥–æ–≤ –∏ –∂–µ–Ω—Å–∫–æ–º —Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º –∑–¥–æ—Ä–æ–≤—å–µ'
        };
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ  
        window.vkBridgeInstance = null;
        
        console.log('üöÄ –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∫–≤–∏–∑ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...');
    </script>
    
    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script src="questions.js"></script>
    <script src="app.js"></script>
    
    <!-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <script src="user-fix.js"></script>
    
    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–±–æ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤ -->
    <script src="first-aid-questions.js"></script>
    <script src="first-aid-hard-questions.js"></script>
    <script src="obstetrics-questions.js"></script>
    <script src="obstetrics-hard-questions.js"></script>
    
    <!-- –°–∏—Å—Ç–µ–º–∞ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
    <script src="gamification.js"></script>
    
    <!-- –ù–û–í–´–ô –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å —à–µ—Ä–∏–Ω–≥–∞ -->
    <script>
        // fixed-vk-share.js - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å —à–µ—Ä–∏–Ω–≥–∞ –¥–ª—è VK
        (function() {
            'use strict';
            
            console.log('üì§ –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å —à–µ—Ä–∏–Ω–≥–∞ –¥–ª—è VK...');
            
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(initVKShare, 2000);
            });
            
            function initVKShare() {
                console.log('üéØ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º VK —à–µ—Ä–∏–Ω–≥');
                
                const shareButton = document.getElementById('share-results');
                if (!shareButton) {
                    console.warn('‚ùå –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                    return;
                }
                
                // –ó–∞–º–µ–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–Ω–æ–ø–∫–∏
                shareButton.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    console.log('üì§ –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ - –¥–µ–ª–∏–º—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º');
                    shareResults();
                };
                
                console.log('‚úÖ VK —à–µ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω');
            }
            
            function shareResults() {
                console.log('üéØ –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å —à–µ—Ä–∏–Ω–≥–∞...');
                
                // –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                const results = getResults();
                if (!results) {
                    console.error('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã');
                    showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞', 'error');
                    return;
                }
                
                console.log('üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è —à–µ—Ä–∏–Ω–≥–∞:', results);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ —à–µ—Ä–∏–Ω–≥–∞
                showShareDialog(results);
            }
            
            function showShareDialog(results) {
                // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≤—ã–±–æ—Ä–æ–º —Å–ø–æ—Å–æ–±–∞ —à–µ—Ä–∏–Ω–≥–∞
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.7);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10000;
                    backdrop-filter: blur(5px);
                    animation: fadeIn 0.3s ease;
                `;
                
                const dialog = document.createElement('div');
                dialog.style.cssText = `
                    background: white;
                    border-radius: 20px;
                    padding: 30px;
                    max-width: 400px;
                    width: 90%;
                    text-align: center;
                    animation: slideIn 0.3s ease;
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
                `;
                
                const message = createShareMessage(results);
                
                dialog.innerHTML = `
                    <h3 style="margin-bottom: 20px; color: #333;">üéâ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</h3>
                    <p style="margin-bottom: 25px; color: #666; line-height: 1.5;">
                        –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏:
                    </p>
                    
                    <button id="share-vk-message" style="
                        width: 100%;
                        padding: 15px;
                        margin-bottom: 10px;
                        background: #4680C2;
                        color: white;
                        border: none;
                        border-radius: 12px;
                        font-size: 16px;
                        cursor: pointer;
                        transition: all 0.3s ease;
                    ">
                        üí¨ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –í–ö
                    </button>
                    
                    <button id="share-copy-text" style="
                        width: 100%;
                        padding: 15px;
                        margin-bottom: 10px;
                        background: #10B981;
                        color: white;
                        border: none;
                        border-radius: 12px;
                        font-size: 16px;
                        cursor: pointer;
                        transition: all 0.3s ease;
                    ">
                        üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç
                    </button>
                    
                    <button id="share-image" style="
                        width: 100%;
                        padding: 15px;
                        margin-bottom: 20px;
                        background: #8B5CF6;
                        color: white;
                        border: none;
                        border-radius: 12px;
                        font-size: 16px;
                        cursor: pointer;
                        transition: all 0.3s ease;
                    ">
                        üñºÔ∏è –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ –∫–∞—Ä—Ç–∏–Ω–∫—É
                    </button>
                    
                    <button id="close-dialog" style="
                        width: 100%;
                        padding: 12px;
                        background: #f3f4f6;
                        color: #666;
                        border: none;
                        border-radius: 10px;
                        font-size: 14px;
                        cursor: pointer;
                    ">
                        –û—Ç–º–µ–Ω–∏—Ç—å
                    </button>
                `;
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes fadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    @keyframes slideIn {
                        from { transform: translateY(-50px); opacity: 0; }
                        to { transform: translateY(0); opacity: 1; }
                    }
                `;
                document.head.appendChild(style);
                
                modal.appendChild(dialog);
                document.body.appendChild(modal);
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
                dialog.querySelector('#share-vk-message').onclick = () => {
                    shareViaVKMessage(message);
                    closeDialog();
                };
                
                dialog.querySelector('#share-copy-text').onclick = () => {
                    copyToClipboard(message);
                    closeDialog();
                };
                
                dialog.querySelector('#share-image').onclick = () => {
                    generateAndDownloadImage(results);
                    closeDialog();
                };
                
                dialog.querySelector('#close-dialog').onclick = closeDialog;
                
                modal.onclick = (e) => {
                    if (e.target === modal) closeDialog();
                };
                
                function closeDialog() {
                    modal.style.animation = 'fadeOut 0.3s ease';
                    setTimeout(() => {
                        if (modal.parentNode) {
                            modal.parentNode.removeChild(modal);
                        }
                        document.head.removeChild(style);
                    }, 300);
                }
            }
            
            function shareViaVKMessage(message) {
                const bridge = getVKBridge();
                if (!bridge) {
                    console.warn('‚ö†Ô∏è VK Bridge –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                    copyToClipboard(message);
                    return;
                }
                
                console.log('üí¨ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è VK...');
                
                bridge.send('VKWebAppShare', { 
                    message: message 
                })
                .then((data) => {
                    console.log('‚úÖ –£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è:', data);
                    showNotification('‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!', 'success');
                    
                    // –î–∞–µ–º –Ω–∞–≥—Ä–∞–¥—É –∑–∞ —à–µ—Ä–∏–Ω–≥
                    giveShareReward();
                })
                .catch((error) => {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
                    showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å. –¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞.', 'warning');
                    copyToClipboard(message);
                });
            }
            
            function copyToClipboard(text) {
                console.log('üìã –ö–æ–ø–∏—Ä—É–µ–º –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞...');
                
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(text)
                        .then(() => {
                            showNotification('üìã –¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success');
                        })
                        .catch(() => {
                            fallbackCopy(text);
                        });
                } else {
                    fallbackCopy(text);
                }
            }
            
            function fallbackCopy(text) {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.left = '-9999px';
                document.body.appendChild(textarea);
                textarea.select();
                
                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        showNotification('üìã –¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!', 'success');
                    } else {
                        showTextDialog(text);
                    }
                } catch (err) {
                    showTextDialog(text);
                }
                
                document.body.removeChild(textarea);
            }
            
            function generateAndDownloadImage(results) {
                console.log('üñºÔ∏è –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...');
                
                // –°–æ–∑–¥–∞–µ–º canvas –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                // –†–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                canvas.width = 800;
                canvas.height = 600;
                
                // –§–æ–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, '#667eea');
                gradient.addColorStop(1, '#764ba2');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Å–ª–æ–π
                ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —à—Ä–∏—Ñ—Ç–∞
                ctx.textAlign = 'center';
                ctx.fillStyle = 'white';
                
                // –ó–∞–≥–æ–ª–æ–≤–æ–∫
                ctx.font = 'bold 48px Arial';
                ctx.fillText('üë®‚Äç‚öïÔ∏è –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –ö–≤–∏–∑', canvas.width / 2, 100);
                
                // –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                ctx.font = 'bold 120px Arial';
                ctx.fillText(`${results.percentage}%`, canvas.width / 2, 250);
                
                // –î–µ—Ç–∞–ª–∏
                ctx.font = '32px Arial';
                ctx.fillText(`–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${results.correct} –∏–∑ ${results.total}`, canvas.width / 2, 320);
                
                // –û—Ü–µ–Ω–∫–∞
                const grade = getGrade(results.percentage);
                ctx.font = 'bold 36px Arial';
                ctx.fillText(grade, canvas.width / 2, 380);
                
                // –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
                ctx.font = '24px Arial';
                const motivationText = getMotivationText(results.percentage);
                ctx.fillText(motivationText, canvas.width / 2, 450);
                
                // –ü—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é
                ctx.font = '20px Arial';
                ctx.fillText('ü©∫ –ê —Ç—ã —Å–º–æ–∂–µ—à—å –ª—É—á—à–µ? –ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è!', canvas.width / 2, 520);
                
                // URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                ctx.font = '16px Arial';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.fillText(window.location.href, canvas.width / 2, 560);
                
                // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Å–∫–∞—á–∏–≤–∞–µ–º
                canvas.toBlob((blob) => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `medical-quiz-result-${results.percentage}%.png`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    showNotification('üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!', 'success');
                }, 'image/png');
            }
            
            function getResults() {
                try {
                    // –°–ø–æ—Å–æ–± 1: –ü—Ä—è–º–æ–π –ø–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                    const percentageEl = document.getElementById('percentage');
                    const correctEl = document.getElementById('correct-answers');
                    const totalEl = document.getElementById('total-questions-result');
                    
                    if (percentageEl && correctEl && totalEl) {
                        return {
                            percentage: parseInt(percentageEl.textContent) || 0,
                            correct: parseInt(correctEl.textContent) || 0,
                            total: parseInt(totalEl.textContent) || 0,
                            method: 'direct'
                        };
                    }
                    
                    // –°–ø–æ—Å–æ–± 2: –ü–æ–∏—Å–∫ –≤ —Ç–µ–∫—Å—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                    const pageText = document.body.textContent || '';
                    const percentMatch = pageText.match(/(\d+)%/g);
                    const scoreMatch = pageText.match(/(\d+)\s*–∏–∑\s*(\d+)/g);
                    
                    if (percentMatch && scoreMatch) {
                        const percentage = parseInt(percentMatch[percentMatch.length - 1]);
                        const lastScore = scoreMatch[scoreMatch.length - 1];
                        const scoreNumbers = lastScore.match(/(\d+)\s*–∏–∑\s*(\d+)/);
                        
                        if (scoreNumbers) {
                            return {
                                percentage: percentage,
                                correct: parseInt(scoreNumbers[1]),
                                total: parseInt(scoreNumbers[2]),
                                method: 'text'
                            };
                        }
                    }
                    
                    // –°–ø–æ—Å–æ–± 3: –ó–∞–ø—Ä–æ—Å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    const userPercent = prompt('–ù–µ —É–¥–∞–ª–æ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.\n–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 85):');
                    
                    if (userPercent && !isNaN(userPercent)) {
                        const percent = Math.max(0, Math.min(100, parseInt(userPercent)));
                        const total = 10;
                        const correct = Math.round((percent / 100) * total);
                        
                        return {
                            percentage: percent,
                            correct: correct,
                            total: total,
                            method: 'user'
                        };
                    }
                    
                    return null;
                    
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:', error);
                    return null;
                }
            }
            
            function createShareMessage(results) {
                const emoji = getEmoji(results.percentage);
                const grade = getGrade(results.percentage);
                
                let message = `${emoji} ${grade}! –ü—Ä–æ—à–µ–ª –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∫–≤–∏–∑ –∏ –Ω–∞–±—Ä–∞–ª ${results.percentage}%!\n\n`;
                message += `‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${results.correct} –∏–∑ ${results.total}\n\n`;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
                message += getMotivationText(results.percentage) + '\n\n';
                
                message += `ü©∫ –ê —Ç—ã —Å–º–æ–∂–µ—à—å –ª—É—á—à–µ? –ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∑–Ω–∞–Ω–∏—è!\n\n`;
                message += `#–º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π–∫–≤–∏–∑ #–º–µ–¥–∏—Ü–∏–Ω–∞ #—Ç–µ—Å—Ç\n\n`;
                message += window.location.href;
                
                return message;
            }
            
            function getVKBridge() {
                if (window.vkBridgeInstance) return window.vkBridgeInstance;
                if (window.vkBridge) return window.vkBridge;
                if (typeof vkBridge !== 'undefined') return vkBridge;
                return null;
            }
            
            function getEmoji(percentage) {
                if (percentage >= 95) return 'üèÜ';
                if (percentage >= 85) return 'üåü';
                if (percentage >= 75) return 'üëè';
                if (percentage >= 60) return 'üëç';
                if (percentage >= 50) return 'üìö';
                return 'üí™';
            }
            
            function getGrade(percentage) {
                if (percentage >= 95) return '–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ';
                if (percentage >= 85) return '–û—Ç–ª–∏—á–Ω–æ';
                if (percentage >= 75) return '–û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ';
                if (percentage >= 60) return '–•–æ—Ä–æ—à–æ';
                if (percentage >= 50) return '–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ';
                return '–ï—Å—Ç—å –∫—É–¥–∞ —Ä–∞—Å—Ç–∏';
            }
            
            function getMotivationText(percentage) {
                if (percentage >= 90) {
                    return 'üèÜ –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ù–∞—Å—Ç–æ—è—â–∏–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª!';
                } else if (percentage >= 70) {
                    return 'üëè –•–æ—Ä–æ—à–∏–π —É—Ä–æ–≤–µ–Ω—å –∑–Ω–∞–Ω–∏–π!';
                } else if (percentage >= 50) {
                    return 'üìö –ï—Å—Ç—å –±–∞–∑–∞, –Ω–æ –º–æ–∂–Ω–æ –µ—â–µ –ø–æ–¥—É—á–∏—Ç—å—Å—è!';
                } else {
                    return 'üí™ –ù–∞—á–∞–ª–æ –ø–æ–ª–æ–∂–µ–Ω–æ, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏–∑—É—á–∞—Ç—å –º–µ–¥–∏—Ü–∏–Ω—É!';
                }
            }
            
            function showNotification(text, type = 'info') {
                const colors = {
                    success: '#10B981',
                    error: '#EF4444',
                    warning: '#F59E0B',
                    info: '#3B82F6'
                };
                
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${colors[type]};
                    color: white;
                    padding: 15px 20px;
                    border-radius: 12px;
                    font-size: 16px;
                    font-weight: 500;
                    z-index: 10001;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                    max-width: 300px;
                    line-height: 1.4;
                    animation: slideInRight 0.3s ease;
                `;
                
                notification.textContent = text;
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
                if (!document.getElementById('notification-styles')) {
                    const style = document.createElement('style');
                    style.id = 'notification-styles';
                    style.textContent = `
                        @keyframes slideInRight {
                            from { transform: translateX(100%); opacity: 0; }
                            to { transform: translateX(0); opacity: 1; }
                        }
                        @keyframes slideOutRight {
                            from { transform: translateX(0); opacity: 1; }
                            to { transform: translateX(100%); opacity: 0; }
                        }
                    `;
                    document.head.appendChild(style);
                }
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.animation = 'slideOutRight 0.3s ease';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 4000);
            }
            
            function showTextDialog(message) {
                alert(`–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –∏ –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å –∏–º:\n\n${message}`);
            }
            
            function giveShareReward() {
                if (window.Gamification && window.Gamification.stats) {
                    const stats = window.Gamification.stats;
                    
                    if (!stats.achievements.includes('social')) {
                        stats.achievements.push('social');
                        setTimeout(() => {
                            if (window.Gamification.showAchievement) {
                                window.Gamification.showAchievement('–°–æ—Ü–∏–∞–ª—å–Ω—ã–π: –ø–æ–¥–µ–ª–∏–ª—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º! üì§');
                            }
                        }, 1000);
                        if (window.Gamification.saveStats) {
                            window.Gamification.saveStats();
                        }
                    }
                }
            }
            
            // –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
            window.debugVKShare = {
                testShare: () => {
                    console.log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º —à–µ—Ä–∏–Ω–≥...');
                    shareResults();
                },
                
                getResults: () => {
                    const results = getResults();
                    console.log('üìä –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:', results);
                    return results;
                },
                
                checkVK: () => {
                    const bridge = getVKBridge();
                    console.log('üîç VK Bridge:', bridge ? '–î–æ—Å—Ç—É–ø–µ–Ω' : '–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                    return !!bridge;
                }
            };
            
            console.log('‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π VK —à–µ—Ä–∏–Ω–≥ –∑–∞–≥—Ä—É–∂–µ–Ω');
            console.log('üêõ –î–æ—Å—Ç—É–ø–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–ª–∞–¥–∫–∏: window.debugVKShare');
            
        })();
    </script>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üì± –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            initUserInterface();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º VK Bridge
            initVKBridgeEnhanced();
            
            console.log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é');
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è VK Bridge
        function initVKBridgeEnhanced() {
            console.log('üîó –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è VK Bridge...');
            
            if (typeof vkBridge === 'undefined') {
                console.warn('‚ö†Ô∏è VK Bridge –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                setTimeout(showGuestMode, 1000);
                return;
            }
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ user-fix.js
            const bridge = initVKBridge();
            
            if (bridge) {
                window.vkBridgeInstance = bridge;
                console.log('‚úÖ VK Bridge –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
            } else {
                setTimeout(showGuestMode, 2000);
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function initUserInterface() {
            console.log('üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞...');
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤
            const modeDescription = document.getElementById('mode-description');
            if (modeDescription) {
                document.querySelectorAll('.quiz-mode-btn').forEach(btn => {
                    btn.addEventListener('mouseover', function() {
                        const mode = this.dataset.mode;
                        const description = window.modeDescriptions[mode];
                        if (description) {
                            modeDescription.textContent = description;
                            modeDescription.classList.add('active-description');
                        }
                    });
                    
                    btn.addEventListener('mouseout', function() {
                        modeDescription.classList.remove('active-description');
                    });
                });
            }
            
            console.log('‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω');
        }
        
        // –ü–æ–∫–∞–∑ –≥–æ—Å—Ç–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞
        function showGuestMode() {
            const userData = {
                id: 'guest_' + Date.now(),
                first_name: '–ì–æ—Å—Ç—å',
                last_name: '',
                photo_100: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiM1YTY3ZDgiLz48cGF0aCBkPSJNNTAgMzBjNS41IDAgMTAgNC41IDEwIDEwcy00LjUgMTAtMTAgMTAtMTAtNC41LTEwLTEwIDQuNS0xMCAxMC0xMHptMCAzMGMxMC41IDAgMjAgNS41IDIwIDEwdjVIMzB2LTVjMC00LjUgOS41LTEwIDIwLTEweiIgZmlsbD0id2hpdGUiLz48L3N2Zz4='
            };
            
            updateUserInfo(userData);
            console.log('üë§ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –≥–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º');
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        function updateUserInfo(userData) {
            if (!userData || !userData.first_name) {
                console.warn('‚ö†Ô∏è –ù–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                return;
            }
            
            const userHTML = `
                <img src="${userData.photo_100 || 'https://vk.com/images/camera_100.png'}" 
                     alt="${userData.first_name}" 
                     onerror="this.src='https://vk.com/images/camera_100.png'">
                <span>${userData.first_name} ${userData.last_name || ''}</span>
            `;
            
            const userInfoElement = document.getElementById('user-info');
            const userInfoQuizElement = document.getElementById('user-info-quiz');
            
            if (userInfoElement) {
                userInfoElement.innerHTML = userHTML;
                userInfoElement.classList.add('loaded');
            }
            
            if (userInfoQuizElement) {
                userInfoQuizElement.innerHTML = userHTML;
                userInfoQuizElement.classList.add('loaded');
            }
            
            console.log('‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∞');
        }
    </script>
    
    <!-- –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ -->
    <script>
        window.addEventListener('load', function() {
            console.log('üéâ –í—Å–µ —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
            const status = {
                questions: window.questions ? `${window.questions.length} –≤–æ–ø—Ä–æ—Å–æ–≤` : '‚ùå –ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã',
                gamification: window.Gamification ? '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–∞' : '‚ùå –ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞',
                vkShare: window.debugVKShare ? '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω' : '‚ùå –ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω',
                vkBridge: window.vkBridgeInstance ? '‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω' : '‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω'
            };
            
            console.log('üìã –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:', status);
            console.log('üöÄ –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∫–≤–∏–∑ –≥–æ—Ç–æ–≤!');
        });
    </script>
</body>
</html>
